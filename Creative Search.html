<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Creative Search</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap">
  <style>
    :root{--bg:#202124;--bg-alt:#171717;--surface:#303134;--text:#e8eaed;--text-secondary:#9aa0a6;--border:#5f6368;--accent:#8ab4f8;--logo-gradient:linear-gradient(90deg,#8ab4f8,#c58af9,#f48fb1)}
    [data-theme="light"]{--bg:#fff;--bg-alt:#f1f3f4;--surface:#f8f9fa;--text:#202124;--text-secondary:#5f6368;--border:#dadce0;--accent:#1a73e8;--logo-gradient:linear-gradient(90deg,#4285f4,#9b72cb,#ea4335)}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Roboto',Arial,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column}
    header{padding:16px 24px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px;font-size:14px}
    header select,header button{color:var(--text);padding:6px 10px;border-radius:4px;background:transparent;border:none;cursor:pointer;font-size:14px}
    header button:hover,header select:hover{background:rgba(255,255,255,.08)}
    [data-theme="light"] header button:hover,[data-theme="light"] header select:hover{background:rgba(0,0,0,.05)}
    main{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px}
    .main-logo h1{font-size:clamp(48px,12vw,80px);font-weight:500;letter-spacing:-4px;background:var(--logo-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:32px;text-align:center}
    .search-container{width:min(620px,92vw);display:flex;flex-direction:column;gap:16px}
    .engine-selector-wrapper{position:relative;width:200px}
    .engine-selector{appearance:none;width:100%;padding:8px 36px 8px 44px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:14px;cursor:pointer}
    .engine-selector-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);width:20px;height:20px;pointer-events:none}
    .lang-selector{padding:8px 12px;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:14px;cursor:pointer}
    .search-box-wrapper{position:relative;width:100%}
    .search-box{width:100%;height:48px;padding:0 20px 0 56px;border:1px solid var(--border);border-radius:999px;background:var(--surface);color:var(--text);font-size:16px;outline:none;transition:all .2s}
    .search-box:hover,.search-box:focus{box-shadow:0 1px 6px rgba(0,0,0,.15);border-color:var(--accent);background:var(--bg)}
    .search-icon{position:absolute;left:20px;top:50%;transform:translateY(-50%);color:var(--text-secondary);pointer-events:none;font-size:18px;z-index:1}
    .buttons{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:24px}
    .btn{background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:14px;padding:12px 20px;cursor:pointer;min-width:130px;transition:all .15s}
    .btn:hover{border-color:var(--accent);box-shadow:0 1px 4px rgba(0,0,0,.2)}
    footer{background:var(--bg-alt);padding:16px 24px;font-size:13px;color:var(--text-secondary);border-top:1px solid var(--border);text-align:center;position:relative}
    .footer-links{display:flex;justify-content:center;gap:20px;flex-wrap:wrap;margin-top:8px}
    .footer-links a{color:var(--text-secondary);text-decoration:none}
    .footer-links a:hover{text-decoration:underline}
    #settingsBtn{position:absolute;right:24px;bottom:16px;background:var(--surface);border:1px solid var(--border);border-radius:50%;width:32px;height:32px;line-height:32px;text-align:center;cursor:pointer;font-size:16px;color:var(--text-secondary)}
    #settingsBtn:hover{background:var(--accent);color:#000}
    .about-page{max-width:700px;margin:40px auto;padding:0 20px;line-height:1.6}
    .about-page h1{margin-bottom:24px;text-align:center}
    .about-page ul{margin:16px 0;padding-left:24px}
    .about-page li{margin:12px 0}
  </style>
</head>
<body>

<header>
  <div class="engine-selector-wrapper">
    <img id="currentEngineIcon" class="engine-selector-icon" src="https://www.bing.com/favicon.ico" alt="">
    <select id="engineSelect" class="engine-selector">
      <option value="google" data-icon="https://www.google.com/favicon.ico">Google</option>
      <option value="bing" data-icon="https://www.bing.com/favicon.ico" selected>Bing</option>
      <option value="duckduckgo" data-icon="https://duckduckgo.com/favicon.ico">DuckDuckGo</option>
      <option value="brave" data-icon="https://search.brave.com/static/favicon-32x32.png">Brave</option>
      <option value="yahoo" data-icon="https://s.yimg.com/rz/p/yahoo_favicon_32.png">Yahoo</option>
      <option value="ecosia" data-icon="https://www.ecosia.org/static/icons/favicon.ico">Ecosia</option>
      <option value="baidu" data-icon="https://www.baidu.com/favicon.ico">ç™¾åº¦</option>
      <option value="yandex" data-icon="https://yandex.com/favicon.ico">Yandex</option>
    </select>
  </div>
  <div style="display:flex;gap:16px;align-items:center">
    <select id="langSelect" class="lang-selector">
      <option value="zh-CN" selected>ä¸­æ–‡</option>
      <option value="en">English</option>
      <option value="ja">æ—¥æœ¬èª</option>
      <option value="ko">í•œêµ­ì–´</option>
    </select>
    <button id="themeToggle">â˜€ï¸</button>
    <a href="#about" id="aboutLink">å…³äº</a>
  </div>
</header>

<main id="mainPage">
  <div class="main-logo"><h1>Creative Search</h1></div>
  <form id="searchForm" class="search-container" method="get" target="_blank">
    <div class="search-box-wrapper">
      <div class="search-icon">ğŸ”</div>
      <input type="text" id="searchInput" class="search-box" name="q" placeholder="æ¢ç´¢ä»»ä½•å†…å®¹..." autocomplete="off" autofocus>
    </div>
    <div class="buttons">
      <button class="btn" type="submit">Creative æœç´¢</button>
      <button id="luckyBtn" class="btn" type="button">æ‰‹æ°”ä¸é”™</button>
    </div>
  </form>
</main>

<div id="aboutPage" class="about-page" style="display:none">
  <h1>å…³äº Creative Search</h1>
  <p>ä¸€ä¸ªç®€æ´ã€å¿«é€Ÿã€å°Šé‡éšç§çš„æœç´¢å…¥å£ã€‚</p>
  <p>Powered byï¼š</p>
  <ul>
    <li>Google</li><li>Bing</li><li>DuckDuckGo</li><li>Brave Search</li>
    <li>Yahoo</li><li>Ecosia</li><li>ç™¾åº¦</li><li>Yandex</li>
  </ul>
  <p style="text-align:center;margin-top:40px">
    äº†è§£æ›´å¤šè¯·è½¬åˆ° <a href="https://github.com/CreatorFMZ/Creative-Search" target="_blank">https://github.com/CreatorFMZ/Creative-Search</a><br>
    <a href="#" id="backLink">â† è¿”å›æœç´¢é¡µ</a>
  </p>
</div>

<div id="privacyPage" class="about-page" style="display:none">
  <h1>éšç§æ”¿ç­–</h1>
  <p><strong>Creative Search ä¸æ”¶é›†ä»»ä½•ç”¨æˆ·æ•°æ®ã€‚</strong></p>
  <p>æˆ‘ä»¬ä¸å­˜å‚¨æœç´¢è®°å½•ã€IP åœ°å€ã€æµè§ˆå™¨ä¿¡æ¯æˆ–å…¶ä»–ä»»ä½•ä¸ªäººä¿¡æ¯ã€‚è¿™æ˜¯ä¸€ä¸ªçº¯å‰ç«¯é™æ€é¡µé¢ï¼Œæ‰€æœ‰æœç´¢è¯·æ±‚ç›´æ¥è·³è½¬åˆ°æ‚¨é€‰æ‹©çš„æœç´¢å¼•æ“ã€‚</p>
  <p>æ‚¨å®é™…ä½¿ç”¨çš„æœç´¢å¼•æ“çš„éšç§æ”¿ç­–å¦‚ä¸‹ï¼ˆç‚¹å‡»æŸ¥çœ‹å®˜æ–¹æœ€æ–°ç‰ˆæœ¬ï¼‰ï¼š</p>
  <ul>
    <li><a href="https://policies.google.com/privacy?hl=zh-CN" target="_blank">Google éšç§æ”¿ç­–</a></li>
    <li><a href="https://www.microsoft.com/zh-cn/privacy/privacystatement" target="_blank">Bing / Microsoft éšç§å£°æ˜</a></li>
    <li><a href="https://duckduckgo.com/privacy" target="_blank">DuckDuckGo éšç§æ”¿ç­–</a></li>
    <li><a href="https://search.brave.com/help/privacy-policy" target="_blank">Brave Search éšç§å£°æ˜</a></li>
    <li><a href="https://guce.yahoo.com/privacy-policy?locale=zh-CN" target="_blank">Yahoo éšç§æ”¿ç­–</a></li>
    <li><a href="https://www.ecosia.org/privacy" target="_blank">Ecosia éšç§æ”¿ç­–</a></li>
    <li><a href="https://ir.baidu.com/baidu-statement-privacy-protection" target="_blank">ç™¾åº¦éšç§ä¿æŠ¤å£°æ˜</a></li>
    <li><a href="https://yandex.com/legal/confidential/?lang=zh" target="_blank">Yandex éšç§æ”¿ç­–</a></li>
    <li><a href="https://onecompiler.com/privacy-policy" target="_blank">OneCompiler.com éšç§æ”¿ç­–</a></li>
  </ul>
  <p style="text-align:center;margin-top:40px"><a href="#" id="backFromPrivacy">â† è¿”å›æœç´¢é¡µ</a></p>
</div>

<div id="termsPage" class="about-page" style="display:none">
  <h1>æœåŠ¡æ¡æ¬¾</h1>
  <p>Creative Search æœ¬èº«ä¸æä¾›ç‹¬ç«‹çš„æœåŠ¡æ¡æ¬¾ï¼Œå› ä¸ºå®ƒä»…ä½œä¸ºä¸€ä¸ªçº¯å‰ç«¯è·³è½¬å…¥å£ï¼Œä¸æ”¶é›†ã€ä¸å¤„ç†ã€ä¸å­˜å‚¨ä»»ä½•ç”¨æˆ·æ•°æ®ã€‚</p>
  <p>æ‚¨å®é™…ä½¿ç”¨çš„æœç´¢å¼•æ“åŠç›¸å…³å·¥å…·çš„æœåŠ¡æ¡æ¬¾å¦‚ä¸‹ï¼š</p>
  <ul>
    <li><a href="https://policies.google.com/terms?hl=zh-CN" target="_blank">Google æœåŠ¡æ¡æ¬¾</a></li>
    <li><a href="https://www.microsoft.com/zh-cn/servicesagreement" target="_blank">Microsoft æœåŠ¡åè®®ï¼ˆé€‚ç”¨äº Bingï¼‰</a></li>
    <li><a href="https://duckduckgo.com/terms" target="_blank">DuckDuckGo æœåŠ¡æ¡æ¬¾</a></li>
    <li><a href="https://search.brave.com/help/terms-of-use" target="_blank">Brave Search ä½¿ç”¨æ¡æ¬¾</a></li>
    <li><a href="https://legal.yahoo.com/us/en/yahoo/terms/otos/index.html" target="_blank">Yahoo æœåŠ¡æ¡æ¬¾</a></li>
    <li><a href="https://www.ecosia.org/terms" target="_blank">Ecosia æœåŠ¡æ¡æ¬¾</a></li>
    <li><a href="https://www.baidu.com/duty/" target="_blank">ç™¾åº¦ç”¨æˆ·åè®®</a></li>
    <li><a href="https://yandex.com/legal/termsofservice/?lang=zh" target="_blank">Yandex æœåŠ¡æ¡æ¬¾</a></li>
    <li><a href="https://onecompiler.com/terms-and-conditions" target="_blank">OneCompiler.com æœåŠ¡æ¡æ¬¾</a></li>
  </ul>
  <p style="text-align:center;margin-top:40px"><a href="#" id="backFromTerms">â† è¿”å›æœç´¢é¡µ</a></p>
</div>

<footer>
  <div id="locationText">ç”¨æˆ·æ‰€åœ¨åœ° / Worldwide</div>
  <div>Creative Search Â© Fantastic Star 2026</div>
  <div class="footer-links">
    <a href="#privacy" id="footerPrivacy">éšç§</a>
    <a href="#terms" id="footerTerms">æ¡æ¬¾</a>
    <a href="#about" id="footerAbout">å…³äº</a>
  </div>
  <div id="settingsBtn" title="è®¾ç½®å›½å®¶">âš™ï¸</div>
</footer>

<script>
// å…ƒç´ å¼•ç”¨
const form=document.getElementById("searchForm"),engineSelect=document.getElementById("engineSelect"),
currentIcon=document.getElementById("currentEngineIcon"),input=document.getElementById("searchInput"),
langSelect=document.getElementById("langSelect"),locationElement=document.getElementById("locationText"),
mainPage=document.getElementById("mainPage"),aboutPage=document.getElementById("aboutPage"),
submitBtn=document.querySelector(".buttons .btn[type=submit]"),luckyBtn=document.getElementById("luckyBtn");

// æœç´¢å¼•æ“é…ç½®
const engines={
  google:{url:"https://www.google.com/search",param:"q"},
  bing:{url:"https://www.bing.com/search",param:"q"},
  duckduckgo:{url:"https://duckduckgo.com/",param:"q"},
  brave:{url:"https://search.brave.com/search",param:"q"},
  yahoo:{url:"https://search.yahoo.com/search",param:"p"},
  ecosia:{url:"https://www.ecosia.org/search",param:"q"},
  baidu:{url:"https://www.baidu.com/s",param:"wd"},
  yandex:{url:"https://yandex.com/search/",param:"text"}
};

// å¤šè¯­è¨€æ–‡æœ¬
const i18n={
  "zh-CN":{
    title:"Creative Search",placeholder:"æ¢ç´¢ä»»ä½•å†…å®¹...",searchButton:"Creative æœç´¢",luckyButton:"æ‰‹æ°”ä¸é”™",
    locationPrefix:"ç”¨æˆ·æ‰€åœ¨åœ° / ",aboutTitle:"å…³äº Creative Search",aboutDesc:"ä¸€ä¸ªç®€æ´ã€å¿«é€Ÿã€å°Šé‡éšç§çš„æœç´¢å…¥å£ã€‚",
    aboutPowered:"Powered byï¼š",aboutMore:"äº†è§£æ›´å¤šè¯·è½¬åˆ°",githubLinkText:"https://github.com/CreatorFMZ/Creative-Search",
    backLink:"â† è¿”å›æœç´¢é¡µ",privacyTitle:"éšç§æ”¿ç­–",privacyIntro:"Creative Search ä¸æ”¶é›†ä»»ä½•ç”¨æˆ·æ•°æ®ã€‚",
    privacyDesc:"æˆ‘ä»¬ä¸å­˜å‚¨æœç´¢è®°å½•ã€IP åœ°å€ã€æµè§ˆå™¨ä¿¡æ¯æˆ–å…¶ä»–ä»»ä½•ä¸ªäººä¿¡æ¯ã€‚è¿™æ˜¯ä¸€ä¸ªçº¯å‰ç«¯é™æ€é¡µé¢ï¼Œæ‰€æœ‰æœç´¢è¯·æ±‚ç›´æ¥è·³è½¬åˆ°æ‚¨é€‰æ‹©çš„æœç´¢å¼•æ“ã€‚",
    privacyEngines:"æ‚¨å®é™…ä½¿ç”¨çš„æœç´¢å¼•æ“çš„éšç§æ”¿ç­–å¦‚ä¸‹ï¼ˆç‚¹å‡»æŸ¥çœ‹å®˜æ–¹æœ€æ–°ç‰ˆæœ¬ï¼‰ï¼š",
    termsTitle:"æœåŠ¡æ¡æ¬¾",termsIntro:"Creative Search æœ¬èº«ä¸æä¾›ç‹¬ç«‹çš„æœåŠ¡æ¡æ¬¾ï¼Œå› ä¸ºå®ƒä»…ä½œä¸ºä¸€ä¸ªçº¯å‰ç«¯è·³è½¬å…¥å£ï¼Œä¸æ”¶é›†ã€ä¸å¤„ç†ã€ä¸å­˜å‚¨ä»»ä½•ç”¨æˆ·æ•°æ®ã€‚",
    termsEngines:"æ‚¨å®é™…ä½¿ç”¨çš„æœç´¢å¼•æ“åŠç›¸å…³å·¥å…·çš„æœåŠ¡æ¡æ¬¾å¦‚ä¸‹ï¼š",
    promptSetCountry:"è¯·è¾“å…¥å›½å®¶ä»£ç ï¼ˆISO 3166-1 alpha-2ï¼Œä¾‹å¦‚ CNã€USã€JP ç­‰ï¼‰ã€‚\nå¦‚æœä¸º CNï¼Œå°†é»˜è®¤ä½¿ç”¨ä¸­æ–‡ + Bingï¼›å…¶ä»–æˆ–ç•™ç©ºå°†é»˜è®¤ English + Googleã€‚\n\nå½“å‰å€¼ï¼š",
    welcomePrompt:"æ¬¢è¿é¦–æ¬¡ä½¿ç”¨ Creative Searchï¼\n\nä¸ºäº†æä¾›æ›´åˆé€‚çš„é»˜è®¤è¯­è¨€å’Œæœç´¢å¼•æ“ï¼Œè¯·è¾“å…¥æ‚¨çš„å›½å®¶ä»£ç ï¼ˆISO 3166-1 alpha-2ï¼Œä¾‹å¦‚ CNã€USã€JP ç­‰ï¼‰ã€‚\nCN å°†é»˜è®¤ä¸­æ–‡ + Bingï¼Œå…¶ä»–æˆ–ç•™ç©ºå°†é»˜è®¤ English + Googleã€‚\n\næ‚¨å¯éšæ—¶é€šè¿‡å³ä¸‹è§’ âš™ï¸ æŒ‰é’®ä¿®æ”¹ã€‚"
  },
  "en":{
    title:"Creative Search",placeholder:"Search anything...",searchButton:"Creative Search",luckyButton:"I'm Feeling Lucky",
    locationPrefix:"Location / ",aboutTitle:"About Creative Search",aboutDesc:"A clean, fast, privacy-respecting search portal.",
    aboutPowered:"Powered by:",aboutMore:"Learn more at",githubLinkText:"https://github.com/CreatorFMZ/Creative-Search",
    backLink:"â† Back to search",privacyTitle:"Privacy Policy",privacyIntro:"Creative Search collects no user data.",
    privacyDesc:"We do not store search queries, IP addresses, browser info, or any personal information. This is a pure frontend static pageâ€”all searches redirect directly to your chosen engine.",
    privacyEngines:"Privacy policies of the search engines you may use (click for official latest version):",
    termsTitle:"Terms of Service",termsIntro:"Creative Search itself has no separate terms of service, as it is only a frontend redirect portal that collects, processes, or stores no user data.",
    termsEngines:"Terms of service for the search engines and related tools you actually use:",
    promptSetCountry:"Please enter country code (ISO 3166-1 alpha-2, e.g. CN, US, JP).\nIf CN, defaults to Chinese + Bing; otherwise or empty defaults to English + Google.\n\nCurrent: ",
    welcomePrompt:"Welcome to Creative Search!\n\nTo provide better default language & search engine, please enter your country code (ISO 3166-1 alpha-2, e.g. CN, US, JP).\nCN â†’ Chinese + Bing, others/empty â†’ English + Google.\n\nYou can change it anytime via the âš™ï¸ button at bottom right."
  }
  // ja å’Œ ko å¯ç»§ç»­è¡¥å……ï¼Œå½“å‰ fallback åˆ° zh-CN æˆ– en
};

// æ›´æ–°æœç´¢å¼•æ“
function updateEngine(){
  const e=engineSelect.value;
  form.action=engines[e].url;
  input.name=engines[e].param;
  currentIcon.src=engineSelect.options[engineSelect.selectedIndex].dataset.icon||"https://www.google.com/favicon.ico";
}

// æ›´æ–°è¯­è¨€ç›¸å…³ï¼ˆå ä½ç¬¦ + æŒ‰é’®ï¼‰
function updateLanguage(){
  const lang=langSelect.value,t=i18n[lang]||i18n["zh-CN"];
  input.placeholder=t.placeholder;
  document.documentElement.lang=lang;
}

// æ›´æ–°æ‰€æœ‰ç•Œé¢æ–‡æœ¬
function updateAllTexts(){
  const lang=langSelect.value,t=i18n[lang]||i18n["zh-CN"];
  document.title=t.title;
  input.placeholder=t.placeholder;
  submitBtn.textContent=t.searchButton;
  luckyBtn.textContent=t.luckyButton;
  locationElement.textContent=t.locationPrefix+getDisplayCountry(localStorage.getItem("manualCountryCode")||"");
  
  const aboutH1=aboutPage.querySelector("h1");if(aboutH1)aboutH1.textContent=t.aboutTitle;
  const aboutPs=aboutPage.querySelectorAll("p");if(aboutPs[0])aboutPs[0].textContent=t.aboutDesc;
  if(aboutPs[1])aboutPs[1].textContent=t.aboutPowered;
  const aboutMore=aboutPage.querySelector('p[style*="text-align:center"]');
  if(aboutMore)aboutMore.innerHTML=`${t.aboutMore} <a href="https://github.com/CreatorFMZ/Creative-Search" target="_blank">${t.githubLinkText}</a><br><a href="#" id="backLink">${t.backLink}</a>`;
  
  const privacyH1=document.querySelector("#privacyPage h1");if(privacyH1)privacyH1.textContent=t.privacyTitle;
  const privacyStrong=document.querySelector("#privacyPage strong");if(privacyStrong)privacyStrong.textContent=t.privacyIntro;
  const privacyPs=document.querySelectorAll("#privacyPage p:not([style])");
  if(privacyPs[1])privacyPs[1].textContent=t.privacyDesc;
  if(privacyPs[2])privacyPs[2].textContent=t.privacyEngines;
  
  const termsH1=document.querySelector("#termsPage h1");if(termsH1)termsH1.textContent=t.termsTitle;
  const termsPs=document.querySelectorAll("#termsPage p:not([style])");
  if(termsPs[0])termsPs[0].textContent=t.termsIntro;
  if(termsPs[1])termsPs[1].textContent=t.termsEngines;

  document.getElementById("backLink")?.addEventListener("click",e=>{e.preventDefault();showMainPage()});
}

// æ˜¾ç¤ºä¸»é¡µé¢
function showMainPage(){
  mainPage.style.display="flex";
  aboutPage.style.display="none";
  document.getElementById("privacyPage").style.display="none";
  document.getElementById("termsPage").style.display="none";
}

// å›½å®¶æ˜¾ç¤º
function getDisplayCountry(code){
  if(!code)return"Worldwide";
  const u=code.toUpperCase();
  return u==="CN"?"ä¸­å›½":u;
}

function updateLocationDisplay(){
  const code=localStorage.getItem("manualCountryCode")||"";
  const lang=langSelect.value,t=i18n[lang]||i18n["zh-CN"];
  locationElement.textContent=t.locationPrefix+getDisplayCountry(code);
}

// æ ¹æ®å›½å®¶è®¾ç½®é»˜è®¤è¯­è¨€å’Œå¼•æ“ï¼ˆCN â†’ zh-CN + bingï¼‰
function applyCountryDefaults(){
  const code=(localStorage.getItem("manualCountryCode")||"").toUpperCase();
  if(code==="CN"){
    langSelect.value="zh-CN";
    engineSelect.value="bing";
    localStorage.setItem("lang","zh-CN");
    localStorage.setItem("engine","bing");
  }
}

// è®¾ç½®å›½å®¶
function setCountry(){
  const lang=langSelect.value,t=i18n[lang]||i18n["zh-CN"];
  const cur=localStorage.getItem("manualCountryCode")||"";
  const val=prompt(t.promptSetCountry+(cur||""),cur);
  if(val===null)return;
  const trimmed=val.trim().toUpperCase();
  if(trimmed)localStorage.setItem("manualCountryCode",trimmed);
  else localStorage.removeItem("manualCountryCode");
  updateLocationDisplay();
  applyCountryDefaults();
  updateLanguage();
  updateEngine();
  updateAllTexts();
}

// äº‹ä»¶ç»‘å®š
engineSelect.addEventListener("change",()=>{updateEngine();localStorage.setItem("engine",engineSelect.value)});
langSelect.addEventListener("change",()=>{localStorage.setItem("lang",langSelect.value);updateLanguage();updateAllTexts()});

document.getElementById("themeToggle").addEventListener("click",()=>{
  const cur=document.documentElement.getAttribute("data-theme");
  const next=cur==="dark"?"light":"dark";
  document.documentElement.setAttribute("data-theme",next);
  localStorage.setItem("theme",next);
  document.getElementById("themeToggle").textContent=next==="light"?"ğŸŒ™":"â˜€ï¸";
});

document.querySelectorAll("#aboutLink,#footerAbout").forEach(l=>l.addEventListener("click",e=>{e.preventDefault();mainPage.style.display="none";aboutPage.style.display="block";document.getElementById("privacyPage").style.display="none";document.getElementById("termsPage").style.display="none"}));
document.getElementById("backLink")?.addEventListener("click",e=>{e.preventDefault();showMainPage()});

document.getElementById("footerPrivacy").addEventListener("click",e=>{e.preventDefault();mainPage.style.display="none";aboutPage.style.display="none";document.getElementById("privacyPage").style.display="block";document.getElementById("termsPage").style.display="none"});
document.getElementById("backFromPrivacy")?.addEventListener("click",e=>{e.preventDefault();showMainPage()});

document.getElementById("footerTerms").addEventListener("click",e=>{e.preventDefault();mainPage.style.display="none";aboutPage.style.display="none";document.getElementById("privacyPage").style.display="none";document.getElementById("termsPage").style.display="block"});
document.getElementById("backFromTerms")?.addEventListener("click",e=>{e.preventDefault();showMainPage()});

input.addEventListener("keydown",e=>{if(e.key==="Enter"){e.preventDefault();form.submit()}});
document.getElementById("luckyBtn").addEventListener("click",()=>{const d=["https://duckgame.oneapp.dev/","https://deeplost.oneapp.dev/"];window.open(d[Math.floor(Math.random()*d.length)],"_blank")});
document.getElementById("settingsBtn").addEventListener("click",setCountry);

// åˆå§‹åŒ–
window.addEventListener("load",()=>{
  const savedEngine=localStorage.getItem("engine"),savedLang=localStorage.getItem("lang");
  if(savedEngine)engineSelect.value=savedEngine;
  if(savedLang)langSelect.value=savedLang;

  applyCountryDefaults();
  updateEngine();
  updateLanguage();
  updateAllTexts();
  updateLocationDisplay();

  // ä¸»é¢˜åˆå§‹åŒ–
  const theme=localStorage.getItem("theme")|| (window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark");
  document.documentElement.setAttribute("data-theme",theme);
  document.getElementById("themeToggle").textContent=theme==="light"?"ğŸŒ™":"â˜€ï¸";

  // é¦–æ¬¡è®¾ç½®å›½å®¶æç¤º
  if(!localStorage.getItem("countryConfigured")){
    setTimeout(()=>{
      const lang=langSelect.value,t=i18n[lang]||i18n["zh-CN"];
      const val=prompt(t.welcomePrompt,"");
      if(val!==null){
        const trimmed=val.trim().toUpperCase();
        if(trimmed)localStorage.setItem("manualCountryCode",trimmed);
        updateLocationDisplay();
        applyCountryDefaults();
        updateLanguage();
        updateEngine();
        updateAllTexts();
        localStorage.setItem("countryConfigured","true");
      }
    },800);
  }
});
</script>
</body>
</html>